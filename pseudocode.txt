if (user exits) {
    get id
} else {
    add user
    get id
}

if (sending to own album) {
    if (album exists) {
        add photo to album
    } else {
        create album
        add photo to album
    }
} else {
    if (friend's album exists) {
        add photo to album
        hide photo
        if (user has permission) {
            show photo
        } else {
            send email to friend asking for permission
        }
    } else {
        return an error
    }


}
